{"version":3,"file":"index.module.js","sources":["../src/twitter.tsx","../src/html/handlers.tsx","../src/html/node.tsx","../src/twitter-layout/components/containers.tsx","../src/twitter-layout/components/headings.tsx","../src/twitter-layout/components/text.tsx","../src/twitter-layout/components/code.tsx","../src/twitter-layout/components/anchor.tsx","../src/twitter-layout/components/lists.tsx","../src/twitter-layout/components/table.tsx","../src/twitter-layout/components/tweet/tweet-header.tsx","../src/format-number.ts","../src/use-mounted.ts","../src/twitter-layout/components/tweet/tweet-info.tsx","../src/twitter-layout/components/tweet/tweet.tsx","../src/twitter-layout/components/media.tsx","../src/twitter-layout/components/twitter.tsx","../src/twitter-layout/components/embedded-tweet.tsx","../src/twitter-layout/components/index.ts","../src/tweet.tsx"],"sourcesContent":["import React, { createContext, ReactNode, useContext } from 'react'\nimport { ConfigInterface } from 'swr'\n\n// TODO: make this more specific\nexport type TweetAst = Array<any>\n\nexport type TwitterContextValue = {\n  // static tweet ast info\n  tweetAstMap: TweetAstMap\n\n  // SWR config for dynamically fetching tweet ast info\n  swrOptions: ConfigInterface\n}\n\nexport type TweetAstMap = {\n  [tweetId: string]: TweetAst\n}\n\nexport interface TwitterContextProviderProps {\n  value: Partial<TwitterContextValue>\n  children?: ReactNode\n}\n\n// Saves the tweets returned as props to the page\nconst TwitterContext = createContext<TwitterContextValue>({\n  tweetAstMap: {},\n  swrOptions: {\n    fetcher: (id) =>\n      fetch(`https://twitter-search.vercel.app/api/get-tweet-ast/${id}`).then(\n        (r) => r.json()\n      )\n  }\n})\n\nexport function useTwitterContext() {\n  return useContext(TwitterContext)\n}\n\n// allows partials that override outer providers\nexport function TwitterContextProvider({\n  value,\n  children\n}: TwitterContextProviderProps) {\n  const currentContext = useContext(TwitterContext)\n  const { tweetAstMap, swrOptions, ...rest } = value\n  const mergedContext = {\n    ...currentContext,\n    ...rest,\n    tweetAstMap: {\n      ...currentContext.tweetAstMap,\n      ...tweetAstMap\n    },\n    swrOptions: {\n      ...currentContext.swrOptions,\n      ...swrOptions\n    }\n  }\n\n  return (\n    <TwitterContext.Provider value={mergedContext}>\n      {children}\n    </TwitterContext.Provider>\n  )\n}\n\nexport const TwitterContextConsumer = TwitterContext.Consumer\n","import React from 'react'\n\nfunction getContainerClassName(dataType) {\n  if (!dataType) return\n\n  const [type, count] = dataType.split(' ')\n\n  switch (type) {\n    case 'image-container':\n      return `image-container image-count-${count}`\n    case 'gif-container':\n    case 'video-container':\n      return type\n  }\n}\n\nexport default {\n  div(props, components, i) {\n    const { data } = props\n    const type = props.dataType || (data && data.type)\n\n    if (type === 'tweet') {\n      return (\n        <components.Tweet key={i} data={data}>\n          {props.children}\n        </components.Tweet>\n      )\n    }\n\n    if (type === 'poll-container') {\n      return <components.Poll key={i} data={data} />\n    }\n\n    const className = getContainerClassName(type)\n\n    return (\n      <components.div key={i} className={className} data={data}>\n        {props.children}\n      </components.div>\n    )\n  },\n\n  img({ dataType, ...props }, components, i) {\n    if (dataType === 'emoji-for-text') {\n      return <components.Emoji key={i} src={props.src} alt={props.alt} />\n    }\n\n    if (dataType === 'media-image') {\n      return <components.img key={i} {...props} />\n    }\n\n    return null\n  },\n\n  a(props, components, i) {\n    const type = props.dataType\n\n    if (type === 'mention') {\n      return (\n        <components.Mention\n          key={i}\n          href={props.href}\n          children={props.children}\n        />\n      )\n    }\n\n    if (type === 'hashtag') {\n      return (\n        <components.Hashtag\n          key={i}\n          href={props.href}\n          children={props.children}\n        />\n      )\n    }\n\n    if (type === 'cashtag') {\n      return (\n        <components.Cashtag\n          key={i}\n          href={props.href}\n          children={props.children}\n        />\n      )\n    }\n\n    if (type === 'quote-tweet') {\n      return <components.EmbeddedTweet key={i} href={props.href} />\n    }\n\n    return (\n      <components.a key={i} href={props.href} title={props.title}>\n        {props.children}\n      </components.a>\n    )\n  },\n\n  blockquote(props, components, i) {\n    if (process.env.NEXT_PUBLIC_TWITTER_LOAD_WIDGETS === 'true') {\n      const isEmbeddedTweet = props.className?.includes('twitter-tweet')\n\n      if (isEmbeddedTweet) {\n        return <components.EmbeddedTweet {...props} />\n      }\n    } else {\n      const ast = props.data?.ast\n\n      if (ast) {\n        return <components.EmbeddedTweet key={i} ast={ast[0]} />\n      }\n    }\n\n    return <components.Blockquote key={i} children={props.children} />\n  }\n}\n","import React from 'react'\nimport handlers from './handlers'\n\nconst defaultHandler = (name) => (props, components) => {\n  const Comp = components[name]\n  return Comp ? <Comp {...props} /> : React.createElement(name, props)\n}\n\nfunction handleNode(node, components, i = undefined) {\n  if (!node) {\n    return null\n  }\n\n  if (typeof node === 'string') {\n    return node\n  }\n\n  const handler = handlers[node.tag] || defaultHandler(node.tag)\n\n  if (!handler) {\n    console.error('tweet error missing handler for:', node)\n    return null\n  }\n\n  const { nodes } = node\n  const props = { ...node.props, key: i }\n\n  // Always send className as a string\n  if (props.className && Array.isArray(props.className)) {\n    props.className = props.className.join(' ')\n  }\n\n  if (node.data) {\n    props.data = node.data\n  }\n\n  if (nodes && Array.isArray(nodes)) {\n    props.children = nodes.map((node, i) => handleNode(node, components, i))\n  }\n\n  const element = handler(props, components, i, node)\n\n  if (!element) {\n    console.error('A handler returned null for:', node)\n  }\n\n  return element\n}\n\nexport default function Node({ components, node }) {\n  return handleNode(node, components)\n}\n","import React from 'react'\n\nexport const Div = (p) => <div className={p.className}>{p.children}</div>\n","import React from 'react'\n\nconst Permalink = ({ children, id }) => (\n  <span className='static-tweet-permalink'>\n    <span id={id}></span>\n    <a href={`#${id}`}>{children}</a>\n    <span className='permalink'>#</span>\n  </span>\n)\n\nexport const H1 = (p) => (\n  <h1 className='static-tweet-h1'>\n    <Permalink id={p.data.id}>{p.children}</Permalink>\n  </h1>\n)\n\nexport const H2 = (p) => (\n  <h2 className='static-tweet-h2'>\n    <Permalink id={p.data.id}>{p.children}</Permalink>\n  </h2>\n)\n\nexport const H3 = (p) => (\n  <h3 className='static-tweet-h3'>\n    <Permalink id={p.data.id}>{p.children}</Permalink>\n  </h3>\n)\n\nexport const H4 = (p) => (\n  <h4 className='static-tweet-h4'>\n    <Permalink id={p.data.id}>{p.children}</Permalink>\n  </h4>\n)\n\nexport const H5 = (p) => (\n  <h5 className='static-tweet-h5'>\n    <Permalink id={p.data.id}>{p.children}</Permalink>\n  </h5>\n)\n\nexport const H6 = (p) => (\n  <h6 className='static-tweet-h6'>\n    <Permalink id={p.data.id}>{p.children}</Permalink>\n  </h6>\n)\n","import React from 'react'\nimport cs from 'classnames'\n\nexport const P = ({ className = undefined, ...p }) => (\n  <p className='static-tweet-p' {...p} />\n)\n\nexport const Blockquote = ({ className = undefined, ...p }) => (\n  <blockquote className={cs('static-tweet-blockquote', className)} {...p} />\n)\n\nexport const Hr = ({ className = undefined, ...p }) => (\n  <hr className={cs('static-tweet-hr', className)} {...p} />\n)\n","import React from 'react'\n\nexport const Code = (p) => <code {...p} />\n\nexport const Pre = (p) => <pre {...p} />\n","import React from 'react'\nimport cs from 'classnames'\n\nconst PROTOCOL = /^(https?:|)\\/\\//\n\nconst beautifyHref = (href) => {\n  const text = href.replace(PROTOCOL, '')\n  const i = text.indexOf('/')\n\n  if (i === -1) return text\n  // Remove trailing slash\n  if (i === text.length - 1) {\n    return text.substring(0, i)\n  }\n\n  const hostname = text.substring(0, i)\n  const pathname = text.substring(i)\n\n  // Hide large paths similarly to how twitter does it\n  return pathname.length > 20\n    ? `${hostname}${pathname.substring(0, 15)}...`\n    : text\n}\n\nexport const A = (p) => (\n  <a\n    href={p.href}\n    target='_blank'\n    rel='noopener noreferrer'\n    title={p.title || p.href}\n    className={cs('static-tweet-anchor', p.className)}\n  >\n    {p.children[0] === p.href ? beautifyHref(p.href) : p.children}\n  </a>\n)\n","import React from 'react'\n\nexport const Ul = (p) => <ul {...p} />\n\nexport const Ol = (p) => <ol {...p} />\n\nexport const Li = (p) => <li {...p} />\n","import React from 'react'\n\nexport const Table = (p) => (\n  <div className='table-container'>\n    <table {...p} />\n  </div>\n)\n\nexport const Th = (p) => <th {...p} />\n\nexport const Td = (p) => <td {...p} />\n","import React from 'react'\nimport Image from 'next/image'\n\nexport default function TweetHeader({ tweet }) {\n  const authorUrl = `https://twitter.com/${tweet.username}`\n  const tweetUrl = `https://twitter.com/${tweet.username}/status/${tweet.id}`\n  const avatar = tweet.avatar.normal\n\n  return (\n    <div className='static-tweet-header'>\n      <a\n        href={authorUrl}\n        className='static-tweet-header-avatar'\n        target='_blank'\n        rel='noopener noreferrer'\n      >\n        <Image\n          className='static-tweet-header-rounded'\n          src={avatar}\n          alt={tweet.name}\n          height={36}\n          width={36}\n        />\n      </a>\n\n      <a\n        href={authorUrl}\n        className='static-tweet-header-author'\n        target='_blank'\n        rel='noopener noreferrer'\n      >\n        <span className='static-tweet-header-name' title={tweet.name}>\n          {tweet.name}\n        </span>\n\n        <span\n          className='static-tweet-header-username'\n          title={`@${tweet.username}`}\n        >\n          @{tweet.username}\n        </span>\n      </a>\n\n      <a\n        href={tweetUrl}\n        className='static-tweet-header-brand'\n        target='_blank'\n        rel='noopener noreferrer'\n      >\n        <div\n          className='static-tweet-header-icon-twitter'\n          title='View on Twitter'\n          role='img'\n        />\n      </a>\n    </div>\n  )\n}\n","export default function formatNumber(n) {\n  return n.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')\n}\n","import { useState, useEffect } from 'react'\n\nexport default function useMounted() {\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => setMounted(true), [])\n\n  return mounted\n}\n","import React from 'react'\nimport cs from 'classnames'\nimport format from 'date-fns/format'\n\nimport formatNumber from '../../../format-number'\nimport useMounted from '../../../use-mounted'\n\nexport default function TweetInfo({ tweet, className = undefined }) {\n  const mounted = useMounted()\n  const likeUrl = `https://twitter.com/intent/like?tweet_id=${tweet.id}`\n  const tweetUrl = `https://twitter.com/${tweet.username}/status/${tweet.id}`\n  const createdAt =\n    typeof window !== 'undefined' && mounted ? new Date(tweet.createdAt) : null\n\n  return (\n    <div className={cs('static-tweet-info', className)}>\n      <a\n        className='static-tweet-like'\n        href={likeUrl}\n        title='Like'\n        target='_blank'\n        rel='noopener noreferrer'\n      >\n        <div className='static-tweet-heart'>\n          <div\n            className='static-tweet-icon static-tweet-icon-heart'\n            role='img'\n          />\n        </div>\n\n        {(tweet.heartCount || tweet.likes > 0) && (\n          <span className='static-tweet-likes'>\n            {tweet.heartCount || formatNumber(tweet.likes)}\n          </span>\n        )}\n      </a>\n\n      {createdAt && (\n        <a\n          className='static-tweet-time'\n          href={tweetUrl}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          <time\n            title={`Time Posted: ${createdAt.toUTCString()}`}\n            dateTime={createdAt.toISOString()}\n          >\n            {format(createdAt, 'h:mm a - MMM d, y')}\n          </time>\n        </a>\n      )}\n    </div>\n  )\n}\n","import React from 'react'\nimport TweetHeader from './tweet-header'\nimport TweetInfo from './tweet-info'\n\nconst TweetContext = React.createContext<any>({})\n\nexport const useTweet = () => React.useContext(TweetContext)\n\nexport default function Tweet({ children, data }) {\n  return (\n    <div className='static-tweet-body'>\n      <blockquote className='static-tweet-body-blockquote'>\n        <TweetHeader tweet={data} />\n        <TweetContext.Provider value={data}>{children}</TweetContext.Provider>\n        <TweetInfo tweet={data} />\n      </blockquote>\n    </div>\n  )\n}\n","import React from 'react'\n// import dynamic from 'next/dynamic' // TODO\nimport Image from 'next/image'\nimport { useTweet } from './tweet/tweet'\n\nexport const Img = ({ width, height, src, ...p }) => {\n  const tweet = useTweet()\n  const tweetUrl = `https://twitter.com/${tweet.username}/status/${tweet.id}`\n\n  return (\n    <details className='static-tweet-details'>\n      <summary\n        className='static-tweet-summary'\n        style={{\n          paddingBottom: `${(height / width) * 100 || 0}%`\n        }}\n      >\n        <a\n          href={tweetUrl}\n          className='avatar'\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          <Image\n            {...p}\n            src={`${src}&name=small`}\n            layout='fill'\n            objectFit='cover'\n            quality={80}\n          />\n        </a>\n      </summary>\n    </details>\n  )\n}\n","import React, { Fragment } from 'react'\nimport cs from 'classnames'\n\nimport formatDistanceStrict from 'date-fns/formatDistanceStrict'\n\nexport const TwitterLink = (p) => (\n  <a\n    href={p.href}\n    target='_blank'\n    rel='noopener noreferrer'\n    title={p.title || p.href}\n    className='static-tweet-twitter-link'\n  >\n    <s>{p.type}</s>\n\n    {p.children}\n  </a>\n)\n\nexport const Mention = (p) => (\n  <TwitterLink href={p.href} type='@'>\n    {p.children[0].replace(/^@/, '')}\n  </TwitterLink>\n)\n\nexport const Hashtag = (p) => (\n  <TwitterLink href={p.href} type='#'>\n    {p.children[0].replace(/^\\#/, '')}\n  </TwitterLink>\n)\n\nexport const Cashtag = (p) => (\n  <TwitterLink href={p.href} type='$'>\n    {p.children[0].replace(/^\\$/, '')}\n  </TwitterLink>\n)\n\nexport const Emoji = ({ className, ...p }) => (\n  <img className={cs('static-tweet-emoji', className)} {...p} />\n)\n\n// Note: Poll data is most likely cached, so ongoing polls will not be updated\n// until a revalidation happens\nexport const Poll = ({ data }) => {\n  const votesCount = data.options.reduce(\n    (count, option) => count + option.votes,\n    0\n  )\n  const endsAt = new Date(data.endsAt)\n  const now = new Date()\n\n  return (\n    <div className='static-tweet-poll'>\n      <div className='static-tweet-options'>\n        {data.options.map((option) => {\n          const per = Math.round((option.votes / votesCount) * 100) || 0\n          const width = per || 1 + '%'\n          const widthLabel = per + '%'\n\n          return (\n            <Fragment key={option.position}>\n              <span className='static-tweet-label'>{option.label}</span>\n              <span className='static-tweet-chart' style={{ width }}></span>\n              <span>{widthLabel}</span>\n            </Fragment>\n          )\n        })}\n      </div>\n      <hr />\n      <div className='static-tweet-footer'>\n        <span className='static-tweet-votes-count'>{votesCount} votes</span>\n        <span>\n          {now > endsAt\n            ? 'Final results'\n            : `${formatDistanceStrict(endsAt, now)} left`}\n        </span>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport Node from '../../html/node'\nimport components from './index'\n\nexport default function EmbeddedTweet({ ast }) {\n  return <Node components={components} node={ast} />\n}\n","import { Div } from './containers'\nimport { H1, H2, H3, H4, H5, H6 } from './headings'\nimport { P, Blockquote, Hr } from './text'\nimport { Code, Pre } from './code'\nimport { A } from './anchor'\nimport { Ul, Ol, Li } from './lists'\nimport { Table, Th, Td } from './table'\nimport { Img } from './media'\nimport { Mention, Hashtag, Cashtag, Emoji, Poll } from './twitter'\nimport Tweet from './tweet/tweet'\nimport EmbeddedTweet from './embedded-tweet'\n\nexport default {\n  div: Div,\n\n  h1: H1,\n  h2: H2,\n  h3: H3,\n  h4: H4,\n  h5: H5,\n  h6: H6,\n\n  p: P,\n  blockquote: Blockquote,\n  hr: Hr,\n\n  code: Code,\n  pre: Pre,\n\n  a: A,\n\n  ul: Ul,\n  ol: Ol,\n  li: Li,\n\n  table: Table,\n  th: Th,\n  td: Td,\n\n  img: Img,\n\n  Mention,\n  Hashtag,\n  Cashtag,\n  Emoji,\n  Poll,\n\n  Tweet,\n  EmbeddedTweet\n}\n","import React, { forwardRef } from 'react'\nimport cs from 'classnames'\nimport useSWR from 'swr'\n\nimport { useTwitterContext } from './twitter'\nimport Node from './html/node'\nimport components from './twitter-layout/components'\n\ntype TweetProps = {\n  id: string\n  ast?: any\n  caption?: string\n  className?: string\n  // TODO: understand what br is used for\n  // br?: string\n}\n\nconst Tweet = forwardRef<HTMLElement, TweetProps>(\n  ({ id, ast, caption, className }: TweetProps, ref) => {\n    const twitter = useTwitterContext()\n    const { data: tweetAst } = useSWR(\n      id,\n      (id) => ast || twitter.tweetAstMap[id] || twitter.swrOptions.fetcher(id),\n      twitter.swrOptions\n    )\n\n    return (\n      <article ref={ref} className={cs('static-tweet', className)}>\n        {tweetAst && (\n          <>\n            <Node components={components} node={tweetAst[0]} />\n\n            {caption != null ? (\n              <p className='static-tweet-caption'>{caption}</p>\n            ) : null}\n          </>\n        )}\n      </article>\n    )\n  }\n)\n\nexport { Tweet }\n"],"names":["TwitterContext","createContext","tweetAstMap","swrOptions","fetcher","id","fetch","then","r","json","useTwitterContext","useContext","TwitterContextProvider","value","children","currentContext","rest","mergedContext","React","Provider","TwitterContextConsumer","Consumer","getContainerClassName","dataType","split","type","count","div","props","components","i","data","Tweet","key","Poll","className","img","Emoji","src","alt","a","Mention","href","Hashtag","Cashtag","EmbeddedTweet","title","blockquote","process","env","NEXT_PUBLIC_TWITTER_LOAD_WIDGETS","isEmbeddedTweet","includes","ast","Blockquote","defaultHandler","name","Comp","createElement","handleNode","node","undefined","handler","handlers","tag","console","error","nodes","Array","isArray","join","map","element","Node","Div","p","Permalink","H1","H2","H3","H4","H5","H6","P","cs","Hr","Code","Pre","PROTOCOL","beautifyHref","text","replace","indexOf","length","substring","hostname","pathname","A","target","rel","Ul","Ol","Li","Table","Th","Td","TweetHeader","tweet","authorUrl","username","tweetUrl","avatar","normal","Image","height","width","role","formatNumber","n","toString","useMounted","useState","mounted","setMounted","useEffect","TweetInfo","likeUrl","createdAt","window","Date","heartCount","likes","toUTCString","dateTime","toISOString","format","TweetContext","useTweet","Img","style","paddingBottom","layout","objectFit","quality","TwitterLink","votesCount","options","reduce","option","votes","endsAt","now","per","Math","round","widthLabel","Fragment","position","label","formatDistanceStrict","h1","h2","h3","h4","h5","h6","hr","code","pre","ul","ol","li","table","th","td","forwardRef","ref","caption","twitter","useSWR","tweetAst"],"mappings":"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"}